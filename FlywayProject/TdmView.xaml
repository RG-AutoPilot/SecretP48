<UserControl x:Class="FlywayProject.TdmView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#FAFAFA"
             MinWidth="520" MinHeight="440">
    <Grid Margin="10">
        <TabControl>
            <!-- Tab 1: Connection Settings -->
            <TabItem Header="Connection">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20" MaxWidth="600">
                        <TextBlock Text="SQL Server Connection" FontSize="16" FontWeight="Bold" Foreground="#AA0000" Margin="0,0,0,20"/>
                        <GroupBox Header="Connection Details" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="SQL Instance:" Width="120" VerticalAlignment="Center"/>
                                    <TextBox x:Name="SqlInstanceTextBox" Height="28" Width="250"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <CheckBox x:Name="WindowsAuthCheckBox" IsChecked="True" Content="Use Windows Authentication" Margin="0,0,10,0"/>
                                    <CheckBox x:Name="EncryptConnectionCheckBox" IsChecked="True" Content="Encrypt connection" Margin="0,0,10,0"/>
                                    <CheckBox x:Name="TrustCertCheckBox" IsChecked="True" Content="Trust server certificate"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="Username:" Width="120" VerticalAlignment="Center"/>
                                    <TextBox x:Name="UsernameTextBox" Height="28" Width="200"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="Password:" Width="120" VerticalAlignment="Center"/>
                                    <PasswordBox x:Name="PasswordBox" Height="28" Width="200"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="Source Database:" Width="120" VerticalAlignment="Center"/>
                                    <TextBox x:Name="SourceDbTextBox" Text="Autopilot_Treated" Height="28" Width="200"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="Target Database:" Width="120" VerticalAlignment="Center"/>
                                    <TextBox x:Name="TargetDbTextBox" Text="Autopilot_FullRestore" Height="28" Width="200"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="Autopilot Config (.conf):" Width="120" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="ConfigFileComboBox" Height="28" Width="200"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="TDM-Autopilot Folder:" Width="120" VerticalAlignment="Center"/>
                                    <TextBox x:Name="TdmRootTextBox" Width="300" TextChanged="OnTdmRootTextChanged"/>
                                    <Button Content="Browse..." Click="OnBrowseTdmRootClicked" Margin="5,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                        <Button Content="Test Connection" Click="OnTestConnectionClicked" Width="200" Height="30" Margin="0,0,0,10"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,0" HorizontalAlignment="Left">
                            <Button Content="Install TDM CLIs" Click="OnInstallTdmClisClicked" Width="150" Height="28" Margin="0,0,10,0"/>
                            <Button Content="Install dbatools" Click="OnInstallDbatoolsClicked" Width="150" Height="28"/>
                            <Button Content="Authenticate License / Trial" Click="OnAuthenticateTdmClicked" Width="180" Height="28" Margin="10,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            <!-- Tab 2: TDM Steps -->
            <TabItem Header="TDM Steps">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20" MaxWidth="650">
                        <TextBlock Text="TDM Autopilot Controls" FontSize="16" FontWeight="Bold" Foreground="#AA0000" Margin="0,0,0,20"/>
                        <GroupBox Header="Step 1: Create Databases" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Button Content="Create Databases" Click="OnCreateDatabasesClicked" Width="200" Height="30"/>
                            </StackPanel>
                        </GroupBox>
                        <GroupBox Header="Step 2: Subset Options File" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <ComboBox x:Name="SubsetOptionsComboBox" Height="28" Width="300" Margin="0,0,0,5"/>
                                <Button Content="Run Subset" Click="OnRunSubsetClicked" Width="200" Height="30"/>
                            </StackPanel>
                        </GroupBox>
                        <GroupBox Header="Step 3: Classification" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Button Content="Generate Classification File" Click="OnGenerateClassificationClicked" Width="250" Height="30"/>
                            </StackPanel>
                        </GroupBox>
                        <GroupBox Header="Step 4: Generate Masking File" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Button Content="Generate Masking File" Click="OnGenerateMaskingFileClicked" Width="250" Height="30"/>
                            </StackPanel>
                        </GroupBox>
                        <GroupBox Header="Step 5: Run Data Masking">
                            <StackPanel Margin="10">
                                <ComboBox x:Name="MaskingOptionsComboBox" Height="28" Width="300" Margin="0,0,0,5"/>
                                <Button Content="Run Masking" Click="OnRunMaskingClicked" Width="200" Height="30"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
